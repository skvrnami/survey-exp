---
title: "Survey experimenty"
author: "Michael 맒vr켿치k"
format: revealjs
editor: visual
bibliography: references.bib
---

## Experimenty

> The observation of units after, and possibly before, a **randomly** assigned intervention in a **controlled** setting, which tests one or more precise causal expectations

Survey experiment je experiment, kter칳 se odehr치v치 v r치mci dotazn칤ku 游뱡

## P치r upozorn캩n칤 na za캜치tek

-   experimentov치n칤 na lidech =\> zv치쬰n칤 etiky v칳zkumu [@teele2021]

-   experiment치ln칤 v칳zkum =\> preregistrace hypot칠z, vytv치콏en칤 pre-analysis pl치nu (viz [OSF](https://help.osf.io/article/145-preregistration))

## Historie

Prvn칤 survey experiment byl question wording design (Hadley Cantril, 1940):

| Kontroln칤 sk.                                                                          | Experiment치ln칤 sk.                                                                                                         |
|----------------------------------------------------------------------------------------|----------------------------------------------------------------------------------------------------------------------------|
| Mysl칤te si, 쬰 by USA m캩ly d캩lat v칤ce ne v sou캜asnosti, aby pomohly Anglii a Francii? | Mysl칤te si, 쬰 by USA m캩ly d캩lat v칤ce ne v sou캜asnosti, aby pomohly Anglii a Francii ***v jejich boji proti Hitlerovi***? |
| Ano: 13 %                                                                              | Ano: 22 %                                                                                                                  |

## Designy survey experiment콢

-   **simple design/two-conditions experiment**

-   Sensitive item designs

    -   **List experiment**

    -   Randomized response

    -   Endorsement experiments [@blairComparingCombiningList2014a]

-   Factorial design

-   **Conjoint experiment**

## 

![](figs/trumps.jpeg){fig-align="center"}

## Two-conditions I

George Mountford is 45 years old; he lives in the constituency and studied business at university. He is a solicitor and runs a busy local practice. \[...\]

**John** (kontroln칤 sk.) / **Sarah** (experiment치ln칤 sk.) Burns is 48 years old, and was born and brought up in your area, before going to university to study for a degree in physics. After university John/Sarah trained as an accountant, and set up a company ten years ago; it now employs seven people. \[...\]

-   Which would you prefer as your MP: John/Neither/George.

[@campbellWhatVotersWant2014]

## Limit je va코e p콏edstavivost

> "In this experiment, we manipulated what men believed about their own penis size, relative to others. We gave them false information, stating that the average penis size was larger than it in fact is, reasoning that, on average, these males will feel that relatively and subjectively their own penis was smaller; compared to those told that the average penis size was smaller than true average. We then asked them to rate how much they would like to own a sports car." [@richardson2023]

## P콏칤klad 1

skript `01_simple.R`

```{r}
library(dplyr)

N <- 200
DIFF <- 1

set.seed(1234)

# Vygeneruj kompletn캩 fake data
data <- tibble(
  # Exp. skupina
  skupina = rep(c(0, 1), times = N), 
  # Hodnocen칤 kandid치ta
  eval = rnorm(N * 2, 0, 2), 
  gender = sample(c("man", "woman"), size = N * 2, 
               replace = TRUE), 
  age = floor(runif(N * 2, 18, 80))
) %>% 
  mutate(
    eval = if_else(skupina == 1, eval + DIFF, eval) %>% 
      round(., 0)
  )

head(data)
```

## 

```{r, echo=TRUE}
# Summary stats
data %>% 
  group_by(skupina) %>% 
  summarise(across(where(is.numeric), ~mean(.x)), 
            gender_men = mean(gender == "man"))

```

## 

```{r, echo=TRUE}

t.test(eval ~ skupina, data = data)

```

## 

```{r, echo=TRUE}
lm(eval ~ skupina + age + gender, data = data) %>% 
  summary()

```

## List experimenty

-   item-count technique - kr치tk칳 seznam vs. dlouh칳 seznam se senzitivn칤 ot치zkou

-   person-count technique - X bl칤zk칳ch osob vs. X bl칤zk칳ch osob + respondent

## Item count technique

> Now I'm going to read you three/*four* things that sometimes make people angry or upset. After I read all three, just tell me HOW MANY of them upset you. (I don't want to know which ones, just how many.)
>
> 1.  the federal government increasing the tax on gasoline
>
> 2.  professional athletes getting million-dollar-plus salaries
>
> 3.  large corporations polluting the environment
>
> 4.  *black leaders asking the government for affirmative action.* (sensitive question)
>
> How many, if any, of these things upset you?

## 

```{r}
library(list)
data("affirm")

head(affirm)


```

## 

```{r}
table(affirm$y, affirm$treat)

library(ggplot2)

affirm %>% 
  count(treat, y) %>% 
  group_by(treat) %>% 
  mutate(share = n / sum(n)) %>% 
  ggplot(., aes(x = y, y = share, fill = factor(treat))) + 
  geom_bar(stat = "identity", position = "dodge") + 
  theme_minimal()
```

## 

```{r, echo=TRUE}
affirm %>% 
  group_by(treat) %>% 
  summarise(mean_items = mean(y))

```

## 

```{r}
t.test(y ~ treat, data = affirm)
```

## P콏edpoklady

-   no design effects

-   no liars (ceiling and floor effects)

[@blairStatisticalAnalysisList2012]

```{r, echo=TRUE}

ict.test(affirm$y, affirm$treat, J = 3)

```

## 

```{r, echo=TRUE}
mod0 <- ictreg(y ~ 1, data = affirm, treat = "treat", J = 3, method = "ml")
summary(mod0)

```

## 

```{r}
mod1 <- ictreg(y ~ south + age + male + college, data = affirm, 
               treat = "treat", J=3, method = "ml")

summary(mod1)
```

```{r, eval=FALSE, include=FALSE}
mod2 <- ictreg(y ~ age + college + male + south, treat = "treat", 
	     	       J = 3, data = affirm, method = "ml", 
               floor = TRUE,
               floor.fit = "bayesglm",
               floor.formula = ~ age + college + male + south,
               ceiling = TRUE,
               ceiling.fit = "bayesglm",
               ceiling.formula = ~ age + college + male + south)

summary(mod2, boundary.proportions = T)
```

## Conjoint experimenty

| Atribut                         | Kandid치t A                                                                                | Kandid치t B                                                          |
|---------------------------------|-------------------------------------------------------------------------------------------|---------------------------------------------------------------------|
| Vojensk치 slu쬭a                 | Slou쬴l/a v n치mo콏nictvu                                                                   | Neslou쬴l/a v arm치d캩                                                |
| Postoj k ob캜anstv칤 pro migranty | Ob캜anstv칤 pro neautorizovan칠 migranty bez trestn칤ho z치znamu, kte콏칤 p콏i코li do US jako d캩ti | Ob캜anstv칤 pro v코echny neautorizovan칠 migranty bez trestn칤ho z치znamu |
| P콏edchoz칤 zam캩stn치n칤            | Pr치vn칤k                                                                                   | Pr치vn칤k                                                             |
| V캩k                             | 53                                                                                        | 45                                                                  |
|                                 | ...                                                                                       | ...                                                                 |

## V칳hody

-   testov치n칤 n캩kolika atribut콢 najednou

-   sni쬿je social desirability bias (imperceptability & rationalization) [@druckmanAdvancesExperimentalPolitical2021]

-   evidence extern칤 validity [@hainmuellerAssessingExternalValidity2015]

## Conjoint exp. 2

-   AMCE - average marginal component effect

## P콏칤klad 2

[@teeleTiesThatDouble2018]

```{r}
library(cregg)

voters <- readRDS("data/voters.rds")

cj1 <- cj(voters, winner ~ gender + experience + spouse + 
     occupation + children + age, 
     id = ~responseid)

plot(cj1)
```

## 

```{r, echo=TRUE, eval=FALSE}
cj2 <- cj(voters, winner ~ gender + experience + spouse + occupation + children + age, 
   by = ~respondent_party_id, 
   id = ~responseid) 

plot(cj2, group = "respondent_party_id")
```

## 

```{r}
cj(voters, winner ~ gender + experience + spouse + occupation + children + age, 
   by = ~respondent_party_id, 
   id = ~responseid) %>% 
  plot(., group = "respondent_party_id")

```

## Zdroje
